<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="space-root-folder">
    <target name="space-root-folder">
        <!-- Get the default file-system-root object-->
        <echo>Getting default file-system-root object</echo>
        <ia-select type="file-system-root" where="?[isDefault==true]" property="self"
                   resultProperty="fileSystemRootSelf"/>

        <!-- Create a space-root-folder object if any-->
        <echo>Configuring space-root-folder object with name 'space-${application}'</echo>
        <ia-task self="spaceRootFolderSelf">
            <object typeAlias="space-root-folder" checkExistSpEL="?[name=='space-${application}']">
                <create>
                    <space>${spaceSelf}</space>
                    <name>space-${application}</name>
                    <fileSystemRoot>${fileSystemRootSelf}</fileSystemRoot>
                </create>
            </object>
        </ia-task>

        <echo>Getting space-root-folder object with name 'space-${application}'</echo>
        <ia-select type="space-root-folder" where="?[name=='space-${application}']"
                   property="id"
                   resultProperty="spaceRootId"/>
        <ia-use spaceRootFolder="${spaceRootId}"/>
    </target>
</project>
