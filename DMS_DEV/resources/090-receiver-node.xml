<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="receiver-node">
    <target name="receiver-node">
        <!-- Create a file-folder object if any-->
        <echo>Configuring file-system-folder object with name '${application}-receiver-folder'</echo>
        <ia-task self="fileSystemFolderReceiverNodeSelf">
            <object typeAlias="file-system-folder"
                    checkExistSpEL="?[name=='${application}-receiver-folder']">
                <create>
                    <name>${application}-receiver-folder</name>
                    <parentSpaceRootFolder>${spaceRootFolderSelf}</parentSpaceRootFolder>
                    <subPath>working/${receiverNodeName}</subPath>
                </create>
            </object>
        </ia-task>

        <!-- Create a receiver-node object if any-->
        <echo>Configuring receiver-node object with name '${receiverNodeName}'</echo>
        <ia-task self="receiverNodeSelf">
            <object typeAlias="receiver-node" checkExistSpEL="?[name=='${receiverNodeName}']">
                <create>
                    <name>${receiverNodeName}</name>
                </create>
                <update>
                    <logsStore>${storeSelf}</logsStore>
                    <workingDirectory>${fileSystemFolderReceiverNodeSelf}</workingDirectory>
                    <sips>
                        <format>sip_zip</format>
                        <extractorImpl>com.emc.ia.reception.sip.extractor.impl.ZipSipExtractor
                        </extractorImpl>
                    </sips>
                    <sips>
                        <format>eas_sip_zip</format>
                        <extractorImpl>com.emc.ia.reception.sip.extractor.impl.LegacyZipSipExtractor
                        </extractorImpl>
                    </sips>
                    <sips/>
                </update>
            </object>
        </ia-task>
    </target>
</project>
