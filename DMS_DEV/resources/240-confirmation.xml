<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="confirmation">
    <target name="confirmation">
        <!-- Create a delivery channel object if any -->
        <echo>Configuring delivery channel object with name '${holding}-deliveryChannel'</echo>
        <ia-task self="deliveryChannelSelf">
            <object typeAlias="delivery-channel"
                    checkExistSpEL="?[name=='${holding}-delivery-channel']">
                <create>
                    <name>${holding}-delivery-channel</name>
                </create>
                <update>
                    <fileName>confirmation</fileName>
                    <overwrite>true</overwrite>
                    <compress>false</compress>
                    <prefix>%aip_id%-</prefix>
                    <suffix>.xml</suffix>
                    <store>${storeSelf}</store>
                    <subPath>confirmation/%ia_conf_type%</subPath>
                </update>
            </object>
        </ia-task>

        <!-- Create a Confirmation object if any -->
        <echo>Configuring confirmation object with name '${holding}-confirmation'</echo>
        <ia-task self="confirmationSelf">
            <object typeAlias="confirmation" checkExistSpEL="?[name=='${holding}-confirmation']">
                <create>
                    <name>${holding}-confirmation</name>
                </create>
                <update>
                    <deliveryChannel>${deliveryChannelSelf}</deliveryChannel>
                    <holdings>${holdingSelf}</holdings>
                    <holdings/>
                    <types>RECEIPT</types>
                    <types>INVALID</types>
                    <types>REJECT</types>
                    <types>STORAGE</types>
                    <types>PURGE</types>
                    <deliveryChannelParameters>
                        <ia_conf_type>%ia_conf_type%</ia_conf_type>
                        <aip_id>%ia_conf_aip_id%</aip_id>
                        <ia_conf_datetime>%ia_conf_datetime%</ia_conf_datetime>
                    </deliveryChannelParameters>
                </update>
            </object>
        </ia-task>
    </target>
</project>
